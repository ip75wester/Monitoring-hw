# Домашнее задание к занятию "`10.3 «Pacemaker»`" - `Илья Попов`


### Задание 1

Опишите основные функции и назначение Pacemaker.

Приведите ответ в свободной форме.

### Ответ

Pacemaker — это менеджер ресурсов кластера со следующими основными функциями:

● Обнаружение и восстановление сбоев на уровне узлов и сервисов;

● Независимость от подсистемы хранения: общий диск не требуется;

● Независимость от типов ресурсов: все, что может быть заскриптовано, может быть кластеризовано;

● Поддержка STONITH (Shoot-The-Other-Node-In-The-Head);

● Поддержка кластеров любого размера;

● Поддержка и кворумных и ресурсозависимых кластеров;

● Поддержка практически любой избыточной конфигурации;

● Автоматическая репликация конфига на все узлы кластера;

● Возможность задания порядка запуска ресурсов, а также их совместимости на одном узле;

● Поддержка расширенных типов ресурсов: клонов (запущен на множестве узлов) и с дополнительными состояниями (master/slave и т.п.);

● Единый кластерный шелл (crm), унифицированный, скриптующийся.

Главная задача Pacemaker — достижение максимальной доступности ресурсов, которыми он управляет, и защита их от сбоев.


### Задание 2

Опишите основные функции и назначение Corosync.

Приведите ответ в свободной форме.

### Ответ

Corosync — это программный продукт, позволяющий реализовать кластер серверов. Его основное назначение — знать и передавать состояние всех участников кластера.
В основе работы заложены следующие функции:
● отслеживание состояния приложений;

● оповещение приложений о смене активной ноды кластера;

● отправка одинаковых сообщений процессам на всех узлах кластера;

● предоставление доступа к базе данных с конфигурацией и статистикой, а также отправка уведомлений о ее изменениях.

---

### Задание 3

Соберите модель, состоящую из двух виртуальных машин. Установите Pacemaker, Corosync, Pcs. Настройте HA кластер.

Пришлите скриншот рабочей конфигурации и состояния сервиса для каждого нода.

### Ответ

# Первая нода:
 
![Задание 3.1](https://github.com/ip75wester/Monitoring-hw/blob/main/zada1.PNG)
 

![Задание 3.2](https://github.com/ip75wester/Monitoring-hw/blob/main/zada2.PNG)


![Задание 3.3](https://github.com/ip75wester/Monitoring-hw/blob/main/zada3.PNG)

# Вторая нода:

![Задание 3.4](https://github.com/ip75wester/Monitoring-hw/blob/main/zada4.PNG)

![Задание 3.5](https://github.com/ip75wester/Monitoring-hw/blob/main/zada5.PNG)

---

### Дополнительные задания со звёздочкой*

### Задание 4*

Установите и настройте DRBD-сервис для настроенного кластера.

Пришлите скриншот рабочей конфигурации и состояние сервиса для каждого нода.

### Ответ

# Первая нода:

![Задание 4.1](https://github.com/ip75wester/Monitoring-hw/blob/main/zada6.PNG)


![Задание 4.2](https://github.com/ip75wester/Monitoring-hw/blob/main/zada7.PNG)


![Задание 4.3](https://github.com/ip75wester/Monitoring-hw/blob/main/zada8.PNG)

# Вторая нода:

![Задание 4.4](https://github.com/ip75wester/Monitoring-hw/blob/main/zada9.PNG)

![Задание 4.5](https://github.com/ip75wester/Monitoring-hw/blob/main/zada10.PNG)

![Задание 4.6](https://github.com/ip75wester/Monitoring-hw/blob/main/zada11.PNG)
